<!DOCTYPE html>
<html>

<head>
    <title>esp</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script src="js/jquery.min.js"></script>
    <script src="js/raphael-2.1.4.min.js"></script>
    <script src="js/justgage.js"></script>
    <script>
        $(document).ready(function() {
            setInterval("getAnalogOutputStatus()", 2000);
            displayVoltageLevel();
        });

        function displayVoltageLevel() {
            var g1;
            g1 = new JustGage({
                id: "g1",
                title: "Volts",
                value: 0,
                min: 0,
                max: 12.0,
                gaugeWidthScale: 0.7,
                counter: true,
                titleFontColor: "red",
                titleFontFamily: "Georgia",
                titlePosition: "below",
                valueFontColor: "blue",
                valueFontFamily: "Georgia"
            });
            setInterval(function() {g1.refresh(voltage_level);}, 1500);
        }


        var voltage_level = 0;

        function getAnalogOutputStatus() {
            var someUrl = "/analog_outputs";
            $.ajax({
                url: someUrl,
                dataType: "text",
                success: function(response) {voltage_level = parseFloat(response);}
            })
        }



        function setNewVoltageLevel(newVoltageValue) {
            var someUrl = "/analog_outputs/update?value=" + newVoltageValue;
            $.ajax({url: someUrl,dataType: "text",success: function(response) {voltage_level = parseFloat(response);}})}
    </script>

</head>

<body>
    <header>
        <img src="images/logo.jpg">
        <h1>ESP8266 BASED WEBSERVER</h1>
    </header>

    <nav>

        <ul>
            <li><a href="index.html">Digital Outputs</a>
            </li>
            <li><a href="dinputs.html">Digital inputs</a>
            </li>
            <li><a class="active" href="anoutputs.html">Analog Outputs</a>
            </li>
            <li><a href="aninputs.html">Analog Inputs</a>
            </li>
			<li><a href="words.html">Lot of text</a>
            </li>
        </ul>

    </nav>
    <section>
	
        <h3>Enter new voltage value and press Update btton</h3>
        <input type="text" id="volts" maxlength="5" placeholder="Voltage..(0.00-12.00)">
        <button class="button" onclick="setNewVoltageLevel(document.getElementById('volts').value);">Update</button>

        <div class="container">
            <div id="g1" class="gauge"></div>
        </div>

    </section>

</body>

</html>